<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MLB Home Run Predictor</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <style>
  table {
    border-collapse: separate; /* separate borders for horizontal lines only */
    border-spacing: 0;
    width: 100%;
    margin-top: 20px;
    table-layout: fixed;
    background: white; /* uniform background */
  }
  thead th {
    position: sticky;
    top: 0;
    background: #f0f0f0;
    cursor: pointer;
    border-bottom: 2px solid #ccc; /* horizontal header bottom line */
    padding: 6px 8px;
    user-select: none;
  }
  tbody tr {
    border-bottom: 1px solid #ddd; /* light gray horizontal line */
  }
  tbody tr:last-child {
    border-bottom: none; /* no line after last row */
  }
  th, td {
    padding: 6px 8px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    border-left: none !important;  /* no vertical lines */
    border-right: none !important; /* no vertical lines */
  }
  /* Left align text columns */
  .text-left {
    text-align: left;
    padding-left: 12px;
  }
  /* Right align numeric columns */
  .text-right {
    text-align: right;
    padding-right: 12px;
    font-feature-settings: "tnum";
  }
</style>
</head>
<body>

  <h1>MLB Home Run Predictor</h1>

  <table id="lineup-table" aria-label="MLB Lineups Table">
    <thead>
      <tr>
        <th data-type="string">Batter Name</th>
        <th data-type="string">Team</th>
        <th data-type="string">Opponent</th>
        <th data-type="string">Opposing Pitcher</th>
        <th data-type="string">Ballpark</th>
        <th data-type="number">Temperature</th>
        <th data-type="string">Wind</th>
        <th data-type="number">Humidity</th>
        <th data-type="number">Batter HR/PA</th>
        <th data-type="number">Pitcher HR/PA</th>
        <th data-type="number">PA Since Last HR</th>
        <th data-type="number">DraftKings Odds</th>
      </tr>
    </thead>
    <tbody>
      <!-- Data rows inserted here -->
    </tbody>
  </table>

  <script>
    // Sample data row insertion (replace with your API fetch)
    const sampleData = [
      {
        player: "Aaron Judge",
        team: "NYY",
        opponent: "BOS",
        pitcher: "Chris Sale",
        ballpark: "Yankee Stadium",
        temperature: 75,
        wind: "5 mph NE",
        humidity: 60,
        batter_hr_pa: 0.05,
        pitcher_hr_pa: 0.02,
        pa_since_hr: 15,
        dk_odds: 1.85
      },
      {
        player: "Mookie Betts",
        team: "LAD",
        opponent: "SF",
        pitcher: "Logan Webb",
        ballpark: "Dodger Stadium",
        temperature: 70,
        wind: "3 mph SW",
        humidity: 55,
        batter_hr_pa: 0.04,
        pitcher_hr_pa: 0.025,
        pa_since_hr: 10,
        dk_odds: 1.95
      }
    ];

    const tbody = document.querySelector("#lineup-table tbody");

    function insertRows(data) {
      tbody.innerHTML = "";
      data.forEach(item => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="text-left">${item.player}</td>
          <td class="text-left">${item.team}</td>
          <td class="text-left">${item.opponent}</td>
          <td class="text-left">${item.pitcher}</td>
          <td class="text-left">${item.ballpark}</td>
          <td class="text-right">${item.temperature ?? '–'}</td>
          <td class="text-left">${item.wind ?? '–'}</td>
          <td class="text-right">${item.humidity ?? '–'}</td>
          <td class="text-right">${item.batter_hr_pa ?? '–'}</td>
          <td class="text-right">${item.pitcher_hr_pa ?? '–'}</td>
          <td class="text-right">${item.pa_since_hr ?? '–'}</td>
          <td class="text-right">${item.dk_odds ?? '–'}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    insertRows(sampleData);

    // Sorting functionality
    const headers = document.querySelectorAll("#lineup-table thead th");
    let sortColumn = -1;
    let sortAsc = true;

    headers.forEach((th, idx) => {
      th.addEventListener("click", () => {
        const type = th.getAttribute("data-type");
        sortAsc = (idx === sortColumn) ? !sortAsc : true;
        sortColumn = idx;

        sampleData.sort((a, b) => {
          let valA, valB;
          switch (idx) {
            case 0: valA = a.player; valB = b.player; break;
            case 1: valA = a.team; valB = b.team; break;
            case 2: valA = a.opponent; valB = b.opponent; break;
            case 3: valA = a.pitcher; valB = b.pitcher; break;
            case 4: valA = a.ballpark; valB = b.ballpark; break;
            case 5: valA = a.temperature; valB = b.temperature; break;
            case 6: valA = a.wind; valB = b.wind; break;
            case 7: valA = a.humidity; valB = b.humidity; break;
            case 8: valA = a.batter_hr_pa; valB = b.batter_hr_pa; break;
            case 9: valA = a.pitcher_hr_pa; valB = b.pitcher_hr_pa; break;
            case 10: valA = a.pa_since_hr; valB = b.pa_since_hr; break;
            case 11: valA = a.dk_odds; valB = b.dk_odds; break;
            default: valA = ''; valB = '';
          }

          if (type === "number") {
            valA = valA ?? -Infinity;
            valB = valB ?? -Infinity;
            return sortAsc ? valA - valB : valB - valA;
          } else {
            valA = valA?.toLowerCase() ?? "";
            valB = valB?.toLowerCase() ?? "";
            if (valA < valB) return sortAsc ? -1 : 1;
            if (valA > valB) return sortAsc ? 1 : -1;
            return 0;
          }
        });
        insertRows(sampleData);
      });
    });
  </script>

</body>
</html>
